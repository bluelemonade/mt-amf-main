//  {{ language_de[0] }} 
// <text x="-200" y="150" id="t02" text-anchor="middle" class="icon-text-small"> {{  menunamen.menu[0].de[0]menunamen.menu[0].de[1] }}  </text>
// <text x="-200" y="100" id="t01" text-anchor="middle" class="icon-text-big"> {{  menunamen.menu[0].de[0]  }} </text>

<template>
    <div id="background-container">
        <svg version="1.1" id="wiggles" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 3840 2160" style="enable-background:new 0 0 3840 2160;" xml:space="preserve">
            
            <svg:style type="text/css">
                .quiz0{fill:#A9BDB3;}
                .quiz1{fill:#FFFFFF;}
                .quiz2{fill:#3D3D38;}
                .quiz3{fill:#E8C35D;}
                .quiz4{fill:#B5625C;}
            </svg:style>


            <g id="group1" transform="translate(1920,1080) rotate(0)">
                <path class="blob1" d="M63,-11.8C71.7,6.5,62.1,39.4,42.4,52.2C22.8,65.1,-7,57.9,-27.5,42C-48,26.1,-59.2,1.6,-53.1,-13C-47,-27.6,-23.5,-32.4,1.8,-33C27.1,-33.6,54.2,-30,63,-11.8Z" transform="translate(0 0) scale(2.0)"  />
                <path class="blob2 circlepulse" d="M41.8,-55.5C52.5,-40.9,58.4,-26.1,64.2,-8.9C70.1,8.2,76.1,27.8,70.4,43.6C64.8,59.4,47.6,71.4,31,71.3C14.5,71.3,-1.3,59.1,-18.1,52C-34.9,44.9,-52.6,42.8,-61.8,32.8C-70.9,22.8,-71.5,5.1,-68.5,-12C-65.4,-29.2,-58.7,-45.6,-46.7,-59.9C-34.7,-74.3,-17.3,-86.5,-0.9,-85.5C15.6,-84.4,31.2,-70.1,41.8,-55.5Z" transform="translate(0 0) scale(1.2)" />
                <text x="-200" y="100" id="t11" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t12" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>

            <g id="group2" transform="translate(1920,1080) rotate(0)">
                <path class="blob1" fill="#FF0066" d="M41.8,-55.5C52.5,-40.9,58.4,-26.1,64.2,-8.9C70.1,8.2,76.1,27.8,70.4,43.6C64.8,59.4,47.6,71.4,31,71.3C14.5,71.3,-1.3,59.1,-18.1,52C-34.9,44.9,-52.6,42.8,-61.8,32.8C-70.9,22.8,-71.5,5.1,-68.5,-12C-65.4,-29.2,-58.7,-45.6,-46.7,-59.9C-34.7,-74.3,-17.3,-86.5,-0.9,-85.5C15.6,-84.4,31.2,-70.1,41.8,-55.5Z" transform="translate(0 0) scale(2.0)" />
                <!-- <circle class="circle2" cx="0" cy="0" r="100"/> -->
                <!-- <circle class="circlepulse" cx="0" cy="0" r="30"/> -->
                <text x="-200" y="100" id="t21" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t22" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>
           
            <g id="group3" transform="translate(1920,1080) rotate(0)">
                <path class="blob1" fill="#FF0066" d="M53.7,-63.5C69.5,-50.7,82.2,-33.7,84.6,-15.6C87,2.6,79.2,21.9,68.3,38.1C57.4,54.4,43.4,67.6,27.2,72.7C11,77.7,-7.5,74.5,-23,67.1C-38.5,59.8,-51.1,48.3,-55.9,34.8C-60.8,21.3,-57.8,5.8,-54.4,-8.9C-51.1,-23.7,-47.3,-37.7,-38.1,-51.8C-29,-65.8,-14.5,-79.7,2.2,-82.4C18.9,-85,37.9,-76.4,53.7,-63.5Z" transform="translate(0 0) scale(2.0)" />
                <!-- <circle class="circle3" cx="0" cy="0" r="100"/> -->
                <!-- <circle class="circlepulse" cx="0" cy="0" r="30"/> -->
                <text x="-200" y="100" id="t31" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t32" text-anchor="left" class="icon-text-small"> xxx  </text>
                <text x="-200" y="180" id="t33" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>

            <g id="group4" transform="translate(1920,1080) rotate(0)">
                <path class="blob1" fill="#FF0066" d="M49.4,-63.9C59,-50.8,58.4,-30.5,56.8,-13.8C55.2,2.8,52.6,15.9,48.3,32.2C44,48.4,37.9,68,26,73.1C14,78.2,-3.8,68.8,-19.2,60C-34.6,51.3,-47.6,43.1,-53.2,31.6C-58.8,20.1,-57.1,5.2,-54.5,-9.6C-51.9,-24.4,-48.4,-39,-39.2,-52.1C-30,-65.3,-15,-77.1,2.5,-80C19.9,-82.9,39.8,-77,49.4,-63.9Z" transform="translate(0 0) scale(2.0)" />
                <!-- <circle class="circle4" cx="0" cy="0" r="100"/> -->
                <!-- <circle class="circlepulse" cx="0" cy="0" r="30"/> -->
                <text x="-200" y="100" id="t41" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t42" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>

            <g id="group5" transform="translate(1920,1080) rotate(0)">
                <path class="blob1" fill="#FF0066" d="M44.5,-49.3C59.3,-40.7,73.9,-28.1,80.4,-11.3C86.8,5.6,85,26.8,73.5,38.3C61.9,49.8,40.7,51.5,23.7,51.9C6.8,52.3,-5.8,51.4,-21.9,49.9C-38.1,48.5,-57.8,46.6,-67.7,36C-77.6,25.3,-77.7,5.8,-74.7,-13.5C-71.8,-32.8,-65.7,-52,-52.7,-60.9C-39.8,-69.9,-19.9,-68.7,-2.5,-65.7C14.9,-62.7,29.7,-57.9,44.5,-49.3Z" transform="translate(0 0) scale(2.0)" />
                <!-- <circle class="circle5" cx="0" cy="0" r="100"/> -->
                <!-- <circle class="circlepulse" cx="0" cy="0" r="30"/> -->
                <text x="-200" y="100" id="t51" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t52" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>

            <g id="group6" transform="translate(1920,1080) rotate(0)">
                <path class="blob1"  fill="#FF0066" d="M38.4,-45.6C49.7,-36.4,58.6,-24.1,62.7,-9.7C66.8,4.7,66.1,21.2,58.8,33.9C51.4,46.5,37.3,55.3,22.1,60.8C6.9,66.4,-9.5,68.8,-26.4,65.6C-43.3,62.5,-60.7,53.8,-66.5,40.2C-72.2,26.5,-66.3,7.9,-62.7,-10.8C-59.1,-29.5,-57.7,-48.4,-47.7,-57.8C-37.6,-67.2,-18.8,-67.1,-2.6,-64C13.6,-60.9,27.2,-54.7,38.4,-45.6Z" transform="translate(0 0) scale(2.0)" />
                <!-- <circle class="circle6" cx="0" cy="0" r="100"/> -->
                <!-- <circle class="circlepulse" cx="0" cy="0" r="30"/> -->
                
                <text x="-200" y="100" id="t61" text-anchor="left" class="icon-text-big"> yyy </text>
                <text x="-200" y="140" id="t62" text-anchor="left" class="icon-text-small"> xxx  </text>
            </g>

        </svg>
    </div>
</template>



<script>
import { gsap } from "gsap";
// import { TimelineMax } from "gsap/all";
import Vue from 'vue'
import VueResource from "vue-resource";
Vue.use(VueResource);


export default {
data() {
    return {
        menunamen: "",
        circleShapes: [],
        previousEndPoints: [],
        endPoints: [],
        radius: 500,
        deltaRotation: 30,
        deltaVertikal: 1400,
        deltaHorizontal: 700,
        borderLeft: 1920 - 1100,
        borderRight: 1920 + 1100,
        borderTop: 1080 - 600,
        borderBottom: 1080 + 600,
    }
},
mounted() {
    // gsap.registerPlugin(Draggable);
    this.initFrame();
},
created() {
    this.$http.get('./static/menu-namen.json').then(response => {
        // console.log("!!!!!  menunamen wurde geladen! !!!!")
        this.menunamen = response.body;
        // console.log(this.menunamen.menu[0].de[0]);

        // menunamen setzen
        document.getElementById('t11').textContent = this.menunamen.menu[0].de[0];
        document.getElementById('t12').textContent = this.menunamen.menu[0].de[1];
        
        document.getElementById('t21').textContent = this.menunamen.menu[1].de[0];
        document.getElementById('t22').textContent = this.menunamen.menu[1].de[1];
        
        document.getElementById('t31').textContent = this.menunamen.menu[2].de[0];
        document.getElementById('t32').textContent = this.menunamen.menu[2].de[1];
        document.getElementById('t33').textContent = this.menunamen.menu[2].de[2];
        
        document.getElementById('t41').textContent = this.menunamen.menu[3].de[0];
        document.getElementById('t42').textContent = this.menunamen.menu[3].de[1];
        
        document.getElementById('t51').textContent = this.menunamen.menu[4].de[0];
        document.getElementById('t52').textContent = this.menunamen.menu[4].de[1];
        
        document.getElementById('t61').textContent = this.menunamen.menu[5].de[0];
        document.getElementById('t62').textContent = this.menunamen.menu[5].de[1];


    }, response => {
        console.log(response);
        console.log("!!!!! menunamen wurde nicht geladen! !!!!!")
        this.endload = true;
    });
},
methods: {
    initFrame() {
        
        this.circleShapes = document.querySelectorAll("#group1, #group2, #group3, #group4, #group5, #group6");
        gsap.set("#group1", {transformOrigin:"center center"});
        gsap.set("#group2", {transformOrigin:"center center"});
        gsap.set("#group3", {transformOrigin:"center center"});
        gsap.set("#group4", {transformOrigin:"center center"});
        gsap.set("#group5", {transformOrigin:"center center"});
        gsap.set("#group6", {transformOrigin:"center center"});

        for (var i = 0; i < this.circleShapes.length; i++) {
            this.firstMovement(this.circleShapes[i], i);
            this.endPoints.push([0, 0]);
            this.previousEndPoints.push([0, 0]);
        }
        // console.log(this.endPoints)
        // var pulse1 = document.querySelectorAll(".circlepulse");
        // gsap.to(pulse1, 1, {scale: 1.5, yoyoEase:true, yoyo: true, repeat:-1, repeatDelay:1}); 
        // gsap.to(pulse1, 3, {rotation: 360, repeat:-1, repeatDelay:0, yoyoEase:true, yoyo: true}); 

        var blob1 = document.querySelectorAll(".blob1");
        gsap.set(".blob1", {transformOrigin:"center center"});
        for (i = 0; i < blob1.length; i++) {
            gsap.to(blob1[i], this.random(20, 30), {scale: this.random(1.2, 1.5), yoyoEase:true, yoyo: true, repeat:-1, repeatDelay:1}); 
            gsap.to(blob1[i], this.random(70, 110), {rotation: 360, repeat:-1, repeatDelay:0, yoyoEase:true, yoyo: true}); 
        }

        var blob2 = document.querySelectorAll(".blob2");
        gsap.set(".blob2", {transformOrigin:"center center"});
        for (i = 0; i < blob2.length; i++) {
            gsap.to(blob2[i], this.random(40, 70), {scale: this.random(1.0, 1.4), yoyoEase:true, yoyo: true, repeat:-1, repeatDelay:1}); 
            //gsap.to(blob2[i], this.random(50, 70), {rotation: -360, repeat:-1, repeatDelay:0, yoyoEase:true, yoyo: true}); 
        }

    },
    firstMovement(element, i) {
        // console.log(i);
        // gsap.to(".box", {rotation: 27, x: 100, duration: 1});
        /* this one doesn't work in a linear fashion */
        // var tl = new TimelineMax({repeat:-1, repeatDelay:1});
        // tl.fromTo(pulse1, 1, 
        //     {transformOrigin:"center center", autoAlpha:0.5, scale: 1}, 
        //     {transformOrigin:"center center", autoAlpha:1, scale: 1.5, ease:"Quad.easeInOut"}
        // )
        // .fromTo(pulse1, 1, 
        //     {transformOrigin:"center center", autoAlpha:1, scale: 1}, 
        //     {transformOrigin:"center center", autoAlpha:1, scale: 2.5, ease:"Quad.easeInOut"}, 2.5
        // );
        // tl.restart();
        gsap.to(element, this.random(1, 2.8), {x: this.random( this.borderLeft , this.borderRight), y: this.random(this.borderTop, this.borderBottom), delay: 1, ease:"elastic", onComplete:this.randomMovement, onCompleteParams:[element, i]});
    },
    randomMovement(element, arrayPos) { 
        
        // if (element!=0){
        //     return false;
        // }
        console.log("randomMovement", arrayPos);
        
        // xxx problem: neuer positionswert wird erst nach einiger zeit angefahren...
        // xxx macht es sinn die alten und neuen werte zu checken... also, d.h. es gibt eine oldEndPoints die auch ausgeschlossen wird????
        var isInside = true;
        var doBreak = false;
        while (isInside == true) {
            console.log("isInside = true")
            var newPoint = [ this.random(this.borderLeft , this.borderRight), this.random( this.borderTop, this.borderBottom) ];
            this.previousEndPoints[arrayPos][0] = this.endPoints[arrayPos][0];
            this.previousEndPoints[arrayPos][1] = this.endPoints[arrayPos][1];
            // console.log(this.previousEndPoints, this.endPoints );
            // console.log("next try for", arrayPos);
            // durch alle punkte ausser dem aktuellen, obwohl man kann auch den chekcen
            for (var i = 0; i < this.endPoints.length; i++) {
                if ( (this.checkPointInCircle(this.endPoints[i][0], this.endPoints[i][1], newPoint[0], newPoint[1], this.radius) == true) || (this.checkPointInCircle(this.previousEndPoints[i][0], this.previousEndPoints[i][1], newPoint[0], newPoint[1], this.radius) == true) ){
                    // console.log("point inside", i);
                    // console.log( newPoint[0], newPoint[1] , ">>", this.endPoints[arrayPos][0], this.endPoints[arrayPos][0])
                    // console.log( newPoint[0], newPoint[1] , ">>", this.previousEndPoints[arrayPos][0], this.previousEndPoints[arrayPos][0])
                    doBreak = true
                    break;
                }
            }
            if (doBreak == false){
                console.log("isInside = false")
                isInside = false; 
            } else {
                doBreak = false
            }
        }

        this.endPoints[arrayPos][0] = newPoint[0];
        this.endPoints[arrayPos][1] = newPoint[1];
        if (newPoint[1] > 1080){
            var drehung = this.random (0 - this.deltaRotation, 0 + this.deltaRotation);
        } else {
            drehung = this.random (180 -this.deltaRotation, 180 + this.deltaRotation);
        }
        gsap.to(element, this.random(1.5, 2.5), {x: newPoint[0], y: newPoint[1], rotation: drehung,  delay: this.random(4, 20), ease:"power2.inout", onComplete:this.randomMovement, onCompleteParams:[element, arrayPos]});
        // gsap.to(element, this.random(1.5, 2.5), {x: this.checkRandom(-1400, 1400), y: this.checkRandom(700, -700), delay: this.random(4, 20), ease:"power2.inout", onComplete:this.randomMovement, onCompleteParams:[element, arrayPos]});
    },
    checkPointInCircle(cx, cy, px, py, r) { // kreisx, kreisx, pointx, pointy , radius
        // console.log( ( (x - a) * (x - a) ) +  ((y - b) * (y - b) ));
        if  ( Math.sqrt (  ( (px - cx) * (px - cx) ) + ( (py - cy) * (py - cy) ) ) <  r ) {
            // console.log("inside");
            return true; 
        } else {
            return false; 
        }
    },
    // checkPointInCircle(a, b, x, y, r) { // kreisx, kreisx, pointx, pointy , radius
    //     // console.log( ( (x - a) * (x - a) ) +  ((y - b) * (y - b) ));
    //     if ( (x - a) * (x - a) +  (y - b) * (y - b) <= ( r * r) ) {
    //         // console.log("inside");
    //         return true; 
    //     } else {
    //         return false; 
    //     }
    // }, 
    checkRandom(min, max){
        return this.random(min, max);
    },
    random(min, max) {
        
        // for (var i = 0; i < this.circleShapes.length; i++) {
        //     console.log(this.circleShapes[i].transform);
        // }
        if (max == null) { max = min; min = 0; }
            return Math.random() * (max - min) + min;
        }
    },
    getBigText () {
        return "hey";
    }
}
</script>



<style lang="scss" scoped >

#background-container{
    top: 0px;
    left: 0px;
    width: 3840px;
    height: 2160px;
    position: absolute;
}

/* .background-color{
    fill:#707070;
} */

.blob1{fill: $iconblob1;}
.blob2{fill: $iconblob2;}

// .circle1{fill:#55555544;}
// .circle2{fill:#77777744;}
// .circle3{fill:#99999944;}
// .circle4{fill:#BBBBBB44;}
// .circle5{fill:#DDDDDD44;}
// .circle6{fill:#FFFFFF44;}

// .circlepulse{fill:$iconblob2;}
/* .puls{fill:#eeff00;} */

.icon-text-big{
    font-family: "FontBold";
    fill: $icontext;
    font-size: 48px;
}


.icon-text-small{
    font-family: "FontLight";
    font-size: 34px;
    fill: $icontext;
}
</style>