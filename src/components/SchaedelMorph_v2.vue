<template>
    <div class="svg-container" :ref="'schaedelmorph' + idNr">
         <svg version="1.1" :class="'schaedelmorph' + idNr" @click="doAnim" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 548 548" style="enable-background:new 0 0 400 400;" xml:space="preserve">

                <g class="base-4">
                    <path class="fill_4 st0" d="M260.2,363.4c0,0,2,19.8,0,38.9c0,0-10.5,34.3,25.7,51.4c36.3,17.1,65.3,35.6,95.6,54
                        c30.3,18.5,63.3,21.8,71.8,14.5c8.6-7.2,5.9-31.6,7.9-39.6c2-7.9,6.6-13.2,6.6-17.8s4.6-7.9,3.3-18.5c0,0,9.9-8.6,14.5-20.4
                        c0,0,4.6-10.5,0-25.7c0,0,5.3-15.2,2-24.4c-3.3-9.2-6.6-14.5-5.9-24.4c0.7-9.9,2-12.5,2-12.5s-7.9,8.6-13.8-2
                        c-5.9-10.6-14.7-24.4,18.2-62.2c0,0,5.3-6.6,2.2-12.3c-3.1-5.7-13.2-19.3-27.2-32.1c0,0,18-23.3,12.3-49.6
                        c-5.7-26.4-11.4-65.9-37.4-90.1C412,66.6,347.9,24.8,260.9,16.9c-87-7.9-148.1,38.7-148.1,38.7S57.5,105.7,50,155.8
                        c-7.5,50.1-5.7,94.5,2.6,117.8s47,80.4,117.8,82.6c0,0,9.7-0.9,16.7,6.6c7,7.5,20.7,20.7,29,13.6c8.3-7,5.3-11.9,12.8-11
                        C236.3,366.3,249.4,372.8,260.2,363.4"/>
                    <path class="outline_4 st1" d="M260.2,363.4c0,0,2,19.8,0,38.9c0,0-10.5,34.3,25.7,51.4c36.3,17.1,65.3,35.6,95.6,54
                        c30.3,18.5,63.3,21.8,71.8,14.5c8.6-7.2,5.9-31.6,7.9-39.6c2-7.9,6.6-13.2,6.6-17.8s4.6-7.9,3.3-18.5c0,0,9.9-8.6,14.5-20.4
                        c0,0,4.6-10.5,0-25.7c0,0,5.3-15.2,2-24.4c-3.3-9.2-6.6-14.5-5.9-24.4c0.7-9.9,2-12.5,2-12.5s-7.9,8.6-13.8-2
                        c-5.9-10.6-14.7-24.4,18.2-62.2c0,0,5.3-6.6,2.2-12.3c-3.1-5.7-13.2-19.3-27.2-32.1c0,0,18-23.3,12.3-49.6
                        c-5.7-26.4-11.4-65.9-37.4-90.1C412,66.6,347.9,24.8,260.9,16.9c-87-7.9-148.1,38.7-148.1,38.7S57.5,105.7,50,155.8
                        c-7.5,50.1-5.7,94.5,2.6,117.8s47,80.4,117.8,82.6c0,0,9.7-0.9,16.7,6.6c7,7.5,20.7,20.7,29,13.6c8.3-7,5.3-11.9,12.8-11
                        C236.3,366.3,249.4,372.8,260.2,363.4z"/>
                </g>
                <g class="base-3">
                    <path class="fill_3 st0" d="M258,321.9c0,0,14.1,11,12.7,34.7c-1.3,23.7-9.7,56.7,18.5,76.4s73.4,32.1,100.6,42.6
                        s51,12.3,63.3,1.3c12.3-11,22-21.1,22-33.4c0,0,7-10.1,7.5-19.8c0,0,12.3-5.7,6.1-23.7l-1.3-10.1c0,0-0.9-14.9-13.2-23.7
                        c0,0-10.5-31.8-5.3-53.8c0,0,3.7-11,9.2-17.8c4.4-5.4,6.1-9.2,1.3-14.1c-4.8-4.8-30.3-33.4-25.9-41.3c4.4-7.9,15.8-24.6,4-34.7
                        c-11.9-10.1-25-10.5-28.1-25.9c-3.1-15.4-43.5-83.5-181.5-93.6c0,0-112.5-7.9-171.4,81.3c0,0-17.1,25.5-20.7,40.9
                        c-3.5,15.4-8.3,29.4-14.1,35.1c-5.7,5.7-9,8.5-4.4,12.3c10.5,8.8,16.8,19.2,27.2,32.1c19.3,23.7,77.8,65.1,130.9,56.2
                        C251,333.8,234.3,322.8,258,321.9"/>
                    <path class="outline_3 st1" d="M258,321.9c0,0,14.1,11,12.7,34.7c-1.3,23.7-9.7,56.7,18.5,76.4s73.4,32.1,100.6,42.6
                        s51,12.3,63.3,1.3c12.3-11,22.5-23.4,22.5-35.7c0,0,6.5-7.8,6.9-17.5c0,0,12.3-5.7,6.1-23.7l-1.3-10.1c0,0-0.9-14.9-13.2-23.7
                        c0,0-10.5-31.8-5.3-53.8c0,0,3.7-11,9.2-17.8c4.4-5.4,6.1-9.2,1.3-14.1c-4.8-4.8-30.3-33.4-25.9-41.3c4.4-7.9,15.8-24.6,4-34.7
                        c-11.9-10.1-25-10.5-28.1-25.9c-3.1-15.4-43.5-83.5-181.5-93.6c0,0-112.5-7.9-171.4,81.3c0,0-17.1,25.5-20.7,40.9
                        c-3.5,15.4-8.3,29.4-14.1,35.1c-5.7,5.7-9,8.5-4.4,12.3c10.5,8.8,16.8,19.2,27.2,32.1c19.3,23.7,77.8,65.1,130.9,56.2
                        C251,333.8,234.3,322.8,258,321.9z"/>
                </g>
                <g class="base-2">
                    <path class="fill_2 st0" d="M484.8,427.4c0,0,3.5,12.3-4,20.7c0,0-24.6,58.4-50.5,61.1c-25.9,2.6-53.6-23.7-111.2-45.3
                        s-44.8-72.9-44.8-72.9s8.8-31.2,2.2-73.4c0,0-0.9-4-4-3.5s-0.4,6.6-8.8,7c-8.3,0.4-5.3-5.7-14.1-6.6c-8.8-0.9-13.2,7.9-18,10.1
                        c-4.8,2.2-13.6,1.8-18-5.3c0,0-11.9,4.4-20.2-4.4c-8.3-8.8-14.9-1.8-28.1-18c-13.2-16.3-20-30.8-39.6-47.9c0,0-9-5.3-5.3-13.4
                        c4.3-9.3,11-25.3,13.6-36.2c2.6-11,43.9-101.5,131.4-101.5s140.6,37.8,167.8,94.5c0,0,11.5-0.1,14.1,8.8c2.6,9,2.2,18-4,28.6
                        c-6.1,10.5-22,34.3-13.6,47.9c8.3,13.6,11,16.3,11.9,25.9c0.9,9.7,9.7,36.5,23.7,52.3c14.1,15.8,21.5,32.5,21.5,32.5
                        s6.1,14.5,0.2,16.5C487.2,404.8,492.3,423,484.8,427.4"/>
                    <path class="outline_2 st1" d="M484.8,427.4c0,0,3.5,12.3-4,20.7c0,0-24.6,58.4-50.5,61.1c-25.9,2.6-53.6-23.7-111.2-45.3
                        s-44.8-72.9-44.8-72.9s8.8-31.2,2.2-73.4c0,0-0.9-4-4-3.5s-0.4,6.6-8.8,7c-8.3,0.4-5.3-5.7-14.1-6.6c-8.8-0.9-13.2,7.9-18,10.1
                        c-4.8,2.2-13.6,1.8-18-5.3c0,0-11.9,4.4-20.2-4.4c-8.3-8.8-14.9-1.8-28.1-18c-13.2-16.3-20-30.8-39.6-47.9c0,0-9-5.3-5.3-13.4
                        c4.3-9.3,11-25.3,13.6-36.2c2.6-11,43.9-101.5,131.4-101.5s140.6,37.8,167.8,94.5c0,0,11.5-0.1,14.1,8.8c2.6,9,2.2,18-4,28.6
                        c-6.1,10.5-22,34.3-13.6,47.9c8.3,13.6,11,16.3,11.9,25.9c0.9,9.7,9.7,36.5,23.7,52.3c14.1,15.8,21.5,32.5,21.5,32.5
                        s4.3,8.9,0.2,16.5C487.2,404.8,494,415.6,484.8,427.4z"/>
                </g>
                <g class="base-1">
                    <path class="fill_1 st0" d="M184.7,351.3c0,0,7-6.5,15.8-3.5c11.2,3.8,17.1,1.3,17.1,1.3s13.6,31.2,13.6,60.6
                        c0,29.4-13.2,74.7,43.1,75.6c56.2,0.9,66.3,3.1,100.2,8.8s66.3,15.4,95.8-16.7c28.4-31,31.9-36.1,31.7-52.3c0-0.6,0-1.2,0-1.8
                        c-0.4-17.6,6.1-14.1-5.3-23.3c0,0,6.1-4,6.6-7.5c0.4-3.5-2.2-14.5-11-20.2c0,0,3.1-12.3-9.2-20.7c-12.3-8.3-44.4-21.5-58-44.8
                        c0,0-1.8-7-19.3-15.8c-17.6-8.8-23.7-25.9-29-51.8s-11-75.1-28.1-77.3c-17.1-2.2-22.4,24.6-32.5,11.9
                        c-10.1-12.8-52.7-63.3-95.8-63.3s-96.7,34.3-123,65.9c0,0-22,21.5-13.6,43.1c0,0,5.7,10.1,6.1,21.5s-0.4,48.3,29.9,74.3
                        s28.7,38.8,43.9,40.9C180.2,358.4,184.7,351.3,184.7,351.3"/>
                    <path class="outline_1 st1" d="M184.7,351.3c0,0,7-6.5,15.8-3.5c11.2,3.8,17.1,1.3,17.1,1.3s13.6,31.2,13.6,60.6
                        c0,29.4-13.2,74.7,43.1,75.6c56.2,0.9,66.3,3.1,100.2,8.8s66.3,15.4,95.8-16.7c28.4-31,31.9-36.1,31.7-52.3c0-0.6,0-1.2,0-1.8
                        c-0.4-17.6,6.1-14.1-5.3-23.3c0,0,6.1-4,6.6-7.5c0.4-3.5-2.2-14.5-11-20.2c0,0,3.1-12.3-9.2-20.7c-12.3-8.3-44.4-21.5-58-44.8
                        c0,0-4.6-8.6-19.3-15.8c-17.6-8.7-23.7-25.9-29-51.8s-11-75.1-28.1-77.3c-17.1-2.2-22.4,24.6-32.5,11.9
                        c-10.1-12.8-52.7-63.3-95.8-63.3s-96.7,34.3-123,65.9c0,0-22,21.5-13.6,43.1c0,0,5.7,10.1,6.1,21.5s-0.4,48.3,29.9,74.3
                        s28.7,38.8,43.9,40.9C180.2,358.4,184.7,351.3,184.7,351.3z"/>
                </g>

        </svg>
    </div>
</template>



<script>
import { gsap } from "gsap";
import MorphSVGPlugin from "gsap/MorphSVGPlugin";


export default {
  name: 'SchaedelMorph',
  data: function () {
     return {
        animState: 1,
        tl: "",
        targetTime:  0.0,
     }
  },
  props: {
    msg: String,
    idNr: Number,
  },
  created() {
      // console.log("created schaedel");
      gsap.registerPlugin(MorphSVGPlugin);
      this.tl = gsap.timeline({defaults: {duration: 6.0}});
        // var tl = gsap.timeline({onUpdate:updateSlider, defaults: {duration: 1}}),
    
  },
  mounted() {
    // console.log("mounted schaedel");

    gsap.set(".fill_2", {visibility:"hidden"})
    gsap.set(".fill_3", {visibility:"hidden"})
    gsap.set(".fill_4", {visibility:"hidden"})
    gsap.set(".outline_2", {visibility:"hidden"})
    gsap.set(".outline_3", {visibility:"hidden"})
    gsap.set(".outline_4", {visibility:"hidden"})
    // gsap.set(".zaehne-2", {opacity:0})
    // gsap.set(".blend-2", {opacity:0})
    // gsap.set("#zaehne-1", {visibility:"hclassden"})
    // gsap.set("#blend-1", {visibility:"hclassden"})
    
    // this.tl.addLabel("pos1", 0.0);
    // this.tl.addLabel("pos2", 2.0);
    // this.tl.addLabel("pos3", 4.0);
    // this.tl.addLabel("pos4", 6.0);

    this.tl.pause();


    // var comp = document.querySelector( {{'schaedelmorph' + this.idNr}}");
    // console.log(comp);
    var outline1 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".outline_1");
    var outline2 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".outline_2");
    var outline3 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".outline_3");
    var outline4 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".outline_4");
    this.tl.to(outline1, {morphSVG: outline2 , duration: 2.0, delay: 0.0}, 0.0 )
           .to(outline1, {morphSVG: outline3 , duration: 2.0, delay: 0.0}, 2.0 )
           .to(outline1, {morphSVG: outline4 , duration: 2.0, delay: 0.0}, 4.0 );
    
    var fill1 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".fill_1");
    var fill2 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".fill_2");
    var fill3 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".fill_3");
    var fill4 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".fill_4");
    this.tl.to(fill1, {morphSVG: fill2, duration: 2.0, delay: 0.0,}, 0.0 )
           .to(fill1, {morphSVG: fill3, duration: 2.0, delay: 0.0,}, 2.0 )
           .to(fill1, {morphSVG: fill4, duration: 2.0, delay: 0.0,}, 4.0 );
    
    // var zaehne1 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".zaehne-1");
    // this.tl.to(zaehne1, {opacity: 0, duration: 0.5}, 0.0);
    // var zaehne2 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".zaehne-2");
    // this.tl.to(zaehne2, {opacity: 1.0, duration: 0.5, delay: 0.0}, 1.5);
    // var blend1 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".blend-1");
    // this.tl.to(blend1, {opacity: 0, duration: 0.5}, 0.0);
    // var blend2 = this.$refs['schaedelmorph' + this.idNr].querySelectorAll(".blend-2");
    // this.tl.to(blend2, {opacity: 1.0, duration: 0.5, delay: 0.0}, 1.5);

    // this.tl.to(".outline1", {morphSVG:".outline2", duration: 1.5, delay: 0.0, onComplete: this.animEnd}, 0.5 );
    // this.tl.to(".fill1", {morphSVG:".fill2", duration: 1.5, delay: 0.0,}, 0.5 );
    // this.tl.to(".zaehne-1", {opacity: 0, duration: 0.5}, 0.0);
    // this.tl.to(".zaehne-2", {opacity: 1.0, duration: 0.5, delay: 0.0}, 1.5);
    // this.tl.to(".blend-1", {opacity: 0, duration: 0.5}, 0.0);
    // this.tl.to(".blend-2", {opacity: 1.0, duration: 0.5, delay: 0.0}, 1.5);

    // this.anim1();
    //   if(document.querySelector("#outline1")) {
        //   console.log("found... ");
        //   gsap.to("#outline1", {morphSVG:"#outline2", duration: 1.5, delay: 1.0, repeat:-1, repeatDelay:2, yoyo:true});
        //   gsap.to("#fill1", {morphSVG:"#fill2", duration: 1.5, delay: 1.0, repeat:-1, repeatDelay:2, yoyo:true});
          // gsap.to("#zaehne-1", 0.5, {autoAlpha:0, delay: 0.5, repeat:-1, yoyo:true, repeatDelay:5, ease: "Linear.easeNone"}, 0);
          // gsap.to("#zaehe-1", {opacity: 0, duration: 0.5, repeat:-1, repeatDelay:3, yoyo:true});
          // gsap.to("#zaehne-1", {morphSVG:"#outline2", duration: 2, repeat:-1, repeatDelay:2, yoyo:true});
    //   }
     // gsap.to("#fill1", {morphSVG:"#fill2", duration: 2});
  },
  methods: {
      doAnim: function(e){
           //console.log(e);
            this.targetTime = this.tl.time();
            console.log("targetTime", this.targetTime);

            // this.tl.play();


          if (e.offsetX < (548/2) ){  // back
            if ( ( this.targetTime > 1.95 ) &&  ( this.targetTime <=2.05 ) ){
                // console.log("b1");
                gsap.to(this.tl, { time: 0.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [0]})
                // gsap.fromTo(this.tl, { time: this.targetTime}, { time: 0.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [0]})
            
            } else  if ( ( this.targetTime > 3.95 ) &&  ( this.targetTime <=4.05 ) ){
                // console.log("b2");
                gsap.to(this.tl, { time: 2.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [2]})
                // gsap.fromTo(this.tl, { time: this.targetTime}, { time: 2.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [2]})
            
            } else  if ( ( this.targetTime > 5.95 ) &&  ( this.targetTime <=6.05 ) ){
                // console.log("b3");
                gsap.fromTo(this.tl,{ time: this.targetTime},  { time: 4.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [4]})
            }


          } else { // forward
               if ( ( this.targetTime > -0.05 ) &&  ( this.targetTime <=0.05 ) ){
                // console.log("v1");
                gsap.fromTo(this.tl, { time: this.targetTime}, { time: 2.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [2]})
            
            } else  if ( ( this.targetTime > 1.95 ) && ( this.targetTime <=2.05 ) ){
                // console.log("v2");
                gsap.fromTo(this.tl, { time: this.targetTime}, { time: 4.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [4]})
            
            } else  if ( ( this.targetTime > 3.95 ) && ( this.targetTime <=4.05 ) ){
                // console.log("v3");
                gsap.fromTo(this.tl, { time: this.targetTime}, { time: 6.0, duration: 2.0, onComplete: this.animEnd, onCompleteParams: [6]})
            }

          }
      
      },
    
      animEnd(animState){
          this.animState= animState;
          // this.tl.pause();
          // console.log("animEnd", this.animState)
      },
    //   anim2End(){
         
    //       this.animState= 2;
    //       console.log("anim2End")
    //   }
  },

}
</script>


<style scoped>
.svg-container{
    wclassth: 548px;
    height: auto;
} 

.st0{fill:#DAE4E2;}
.st1{fill:none; stroke:#3D3E3E; stroke-width:4;}
/* .st2{fill:#3D3E3E;} */


</style>